<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Email_more_than_one_open_opp</name>
        <label>Email_more_than_one_open_opp</label>
        <locationX>528</locationX>
        <locationY>1502</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>text_More_than_one_open_opp</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>felicia.tripa@mycase.com, irfan.usman@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>donotreply@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Action Required: LawToolBox, more than 1 open opportunity</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Error_on_Existing_Opp_Decision_Point</name>
        <label>Error on Existing Opp Decision Point</label>
        <locationX>673</locationX>
        <locationY>1016</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>text_Error_LTB_Decision_Point</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>felicia.tripa@mycase.com, irfan.usman@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>noreply@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Subflow Error: LTB &quot;Existing Opportunity&quot; Decision Point</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Email_to_Sales_Ops_Manager</name>
        <label>Send Email to Sales Ops Manager</label>
        <locationX>1462</locationX>
        <locationY>1886</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>text_Invalid_Owner_Email_Template</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>felicia.tripa@mycase.com, irfan.usman@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>donotreply@mycase.com</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Salesforce: LTB Opportunity Owner (Action Required)</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <apiVersion>56.0</apiVersion>
    <assignments>
        <name>Assign_Existing_Opp</name>
        <label>Assign Existing Opp</label>
        <locationX>1040</locationX>
        <locationY>1225</locationY>
        <assignmentItems>
            <assignToReference>var_updating_opportunity.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Process_First_Opp.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Existing_Opp</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Count_Opportunities_Found</name>
        <label>Count Opportunities Found</label>
        <locationX>521</locationX>
        <locationY>1219</locationY>
        <assignmentItems>
            <assignToReference>var_open_opps_COUNT</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>var_Open_Opps</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Existing_Opportunity_Decision</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Create_a_new_LTB_Opp</name>
        <label>Create a new LTB Opp</label>
        <locationX>981</locationX>
        <locationY>1411</locationY>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Integration_Record.Account__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_New_Ownership_ID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_Opp_Stage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.Value_Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>LawToolBox</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.CloseDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_New_LTB_Opportunity_Close_Date</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_ValuePlus_Opp_RecordID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_New_LTB_Opportunity_Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.Signer__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_Signer</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_New_Opportunity.Integration__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_Integration</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_New_LTB_Opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>EndProcess</name>
        <label>EndProcess</label>
        <locationX>1969</locationX>
        <locationY>1761</locationY>
        <assignmentItems>
            <assignToReference>EndFlow</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>End</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Existing_Opportunity_Assignment</name>
        <label>Existing Opportunity Assignment</label>
        <locationX>804</locationX>
        <locationY>873</locationY>
        <assignmentItems>
            <assignToReference>var_updating_opportunity.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>var_Opp_Stage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Existing_Opp_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Final_Closed_Date</name>
        <label>Final Closed Date</label>
        <locationX>678</locationX>
        <locationY>656</locationY>
        <assignmentItems>
            <assignToReference>var_Close_Date</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_Final_LTB_Opportunity_Close_Date</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opp_Linked_to_Integration_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>New_Closed_Date</name>
        <label>New Closed Date</label>
        <locationX>359</locationX>
        <locationY>678</locationY>
        <assignmentItems>
            <assignToReference>var_Close_Date</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_New_LTB_Opportunity_Close_Date</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opp_Linked_to_Integration_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Signer_Assignment</name>
        <label>Signer Assignment</label>
        <locationX>646</locationX>
        <locationY>363</locationY>
        <assignmentItems>
            <assignToReference>var_Signer</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_for_Signer_Field.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Stage_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Signer_Assignment_None</name>
        <label>Signer Assignment None</label>
        <locationX>688</locationX>
        <locationY>50</locationY>
        <assignmentItems>
            <assignToReference>var_Signer</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue></stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Stage_Assignment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Stage_Assignment</name>
        <label>Stage Assignment</label>
        <locationX>512</locationX>
        <locationY>362</locationY>
        <assignmentItems>
            <assignToReference>var_Opp_Stage</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_Update_Opp_Stage_based_on_Integration_Status</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_AccountID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Integration_Record.Account__r.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Owner</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Integration_Record.Account__r.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_valuePlusProduct</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_ValuePlussProduct</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_RecordType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>con_ValuePlus_Opp_RecordID</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Opportunity_Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>for_New_LTB_Opportunity_Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>var_Integration</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Integration_Record.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CloseDate_Assignment</targetReference>
        </connector>
    </assignments>
    <constants>
        <name>con_existing_opportunity</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Existing Match</stringValue>
        </value>
    </constants>
    <constants>
        <description>This is the V+ record id.</description>
        <name>con_ValuePlus_Opp_RecordID</name>
        <dataType>String</dataType>
        <value>
            <stringValue>0123g000000POjjAAG</stringValue>
        </value>
    </constants>
    <constants>
        <name>con_ValuePlussProduct</name>
        <dataType>String</dataType>
        <value>
            <stringValue>LawToolBox</stringValue>
        </value>
    </constants>
    <constants>
        <description>Workato ID</description>
        <name>con_Workato_UserID</name>
        <dataType>String</dataType>
        <value>
            <stringValue>0050R00000A7cZEQAZ</stringValue>
        </value>
    </constants>
    <decisions>
        <name>CloseDate_Assignment</name>
        <label>CloseDate Assignment</label>
        <locationX>502</locationX>
        <locationY>501</locationY>
        <defaultConnector>
            <targetReference>New_Closed_Date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Closed</defaultConnectorLabel>
        <rules>
            <name>Closed_Stage</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>sub_Integration_Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Enabled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sub_Integration_Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Disabled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sub_Integration_Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Requested</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Final_Closed_Date</targetReference>
            </connector>
            <label>Closed Stage</label>
        </rules>
        <rules>
            <name>Not_Closed_In_Trial</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sub_Integration_Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Trial</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>New_Closed_Date</targetReference>
            </connector>
            <label>Not Closed - In Trial</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Record_Check</name>
        <label>Contact Record Check</label>
        <locationX>830</locationX>
        <locationY>369</locationY>
        <defaultConnector>
            <targetReference>Signer_Assignment_None</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Record_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Contact_for_Signer_Field.Id</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Signer_Assignment</targetReference>
            </connector>
            <label>Record Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Existing_Opportunity_Decision</name>
        <label>Existing Opportunity Decision</label>
        <locationX>670</locationX>
        <locationY>1221</locationY>
        <defaultConnector>
            <targetReference>Error_on_Existing_Opp_Decision_Point</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Error</defaultConnectorLabel>
        <rules>
            <name>No_Open_Opps</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_open_opps_COUNT</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>RoundRobin_Service</targetReference>
            </connector>
            <label>No Open Opps</label>
        </rules>
        <rules>
            <name>Open_Opps</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_open_opps_COUNT</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Process_First_Opp</targetReference>
            </connector>
            <label>One Open Opp</label>
        </rules>
        <rules>
            <name>Multiple_Opps</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>var_open_opps_COUNT</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_more_than_one_open_opp</targetReference>
            </connector>
            <label>Multiple Opps</label>
        </rules>
    </decisions>
    <decisions>
        <name>Integration_User_Decision</name>
        <label>Integration User Decision</label>
        <locationX>1707</locationX>
        <locationY>1765</locationY>
        <defaultConnector>
            <targetReference>EndProcess</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Active, Non-integration User</defaultConnectorLabel>
        <rules>
            <name>Integration_User</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Integration_Record.Account__r.Owner.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>con_Workato_UserID</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Integration_Record.Account__r.Owner.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>0053g000001K3XAAA0</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Email_to_Sales_Ops_Manager</targetReference>
            </connector>
            <label>Integration User</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opp_Linked_to_Integration_Record</name>
        <label>Opp_Linked_to_Integration_Record</label>
        <locationX>509</locationX>
        <locationY>862</locationY>
        <defaultConnector>
            <targetReference>Find_Open_LTB_Opportunities</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Linked</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Integration_Record.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Existing_Opportunity_Assignment</targetReference>
            </connector>
            <label>Linked</label>
        </rules>
    </decisions>
    <decisions>
        <name>Owner_Status</name>
        <label>Owner Status</label>
        <locationX>1455</locationX>
        <locationY>1659</locationY>
        <defaultConnector>
            <targetReference>Integration_User_Decision</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Active Owner</defaultConnectorLabel>
        <rules>
            <name>Inactive_Owner</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Integration_Record.Account__r.Owner.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Email_to_Sales_Ops_Manager</targetReference>
            </connector>
            <label>Inactive Owner</label>
        </rules>
    </decisions>
    <description>This flow automates opportunity creation and opportunity updates for the LawToolBox (LTB) integration.
This flow includes a subflow to run the RR service.</description>
    <environments>Default</environments>
    <formulas>
        <name>for_Final_LTB_Opportunity_Close_Date</name>
        <dataType>Date</dataType>
        <expression>TODAY ()</expression>
    </formulas>
    <formulas>
        <description>Calculates the number of days since the first purchase date.
I think this formula needs to be associated with a variable in this flow- I have not done this yet.</description>
        <name>for_FirstPurchase_date</name>
        <dataType>Number</dataType>
        <expression>TODAY () - {!Get_Integration_Record.Account__r.First_Purchase_Date__c}</expression>
        <scale>0</scale>
    </formulas>
    <formulas>
        <name>for_New_LTB_Opportunity_Close_Date</name>
        <dataType>Date</dataType>
        <expression>TODAY() + 7</expression>
    </formulas>
    <formulas>
        <name>for_New_LTB_Opportunity_Name</name>
        <dataType>String</dataType>
        <expression>{!Get_Integration_Record.Account__r.Name} &amp; &quot; - LawToolBox&quot;</expression>
    </formulas>
    <formulas>
        <description>Formula that will update the Opportunity Stage based on the current Integration status for LTB.</description>
        <name>for_Update_Opp_Stage_based_on_Integration_Status</name>
        <dataType>String</dataType>
        <expression>CASE({!sub_Integration_Status}, &#39;Requested&#39;, &quot;Verbal Approvals&quot;, &#39;Enabled&#39;, &quot;Closed Won&quot;, &#39;Disabled&#39;, &quot;Closed Lost&quot;, &#39;In Trial&#39;, &quot;Discovery&quot;, &quot;error&quot;)</expression>
    </formulas>
    <interviewLabel>Integration Record (subflow): LawToolBox, LTB {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Integration Record (subflow): LawToolBox, LTB</label>
    <loops>
        <name>Process_First_Opp</name>
        <label>Process First Opp</label>
        <locationX>861</locationX>
        <locationY>1224</locationY>
        <collectionReference>var_Open_Opps</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Existing_Opp</targetReference>
        </nextValueConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_New_LTB_Opportunity</name>
        <label>Create New LTB Opportunity</label>
        <locationX>1211</locationX>
        <locationY>1411</locationY>
        <connector>
            <targetReference>Update_Integration_Record_0</targetReference>
        </connector>
        <inputReference>var_New_Opportunity</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Contact_for_Signer_Field</name>
        <label>Contact for Signer Field</label>
        <locationX>1027</locationX>
        <locationY>367</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Contact_Record_Check</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>test</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Find_Open_LTB_Opportunities</name>
        <label>Find Open LTB Opportunities</label>
        <locationX>519</locationX>
        <locationY>1063</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Count_Opportunities_Found</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Integration_Record.Account__r.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Value_Product__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>LawToolBox</stringValue>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Closed Won</stringValue>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Closed Lost</stringValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>con_ValuePlus_Opp_RecordID</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>var_Open_Opps</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Value_Product__c</queriedFields>
        <queriedFields>StageName</queriedFields>
        <queriedFields>CloseDate</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Integration_Record</name>
        <label>Get Integration Record</label>
        <locationX>1199</locationX>
        <locationY>366</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Contact_for_Signer_Field</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sub_Record_ID</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Integrations__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Existing_Opp</name>
        <label>Update Existing Opp</label>
        <locationX>1252</locationX>
        <locationY>1226</locationY>
        <connector>
            <targetReference>Update_Integration_Record_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>var_updating_opportunity.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>var_Close_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StageName</field>
            <value>
                <elementReference>for_Update_Opp_Stage_based_on_Integration_Status</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Existing_Opp_0</name>
        <label>Update Existing Opp</label>
        <locationX>1001</locationX>
        <locationY>872</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>con_ValuePlus_Opp_RecordID</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>var_Close_Date</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StageName</field>
            <value>
                <elementReference>for_Update_Opp_Stage_based_on_Integration_Status</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Integration_Record_0</name>
        <label>Update Integration Record</label>
        <locationX>1462</locationX>
        <locationY>1411</locationY>
        <connector>
            <targetReference>Owner_Status</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Integration_Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>var_New_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Integrations__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Integration_Record_0_0</name>
        <label>Update Integration Record</label>
        <locationX>1457</locationX>
        <locationY>1226</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Integration_Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>var_New_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Integrations__c</object>
    </recordUpdates>
    <start>
        <locationX>1072</locationX>
        <locationY>58</locationY>
        <connector>
            <targetReference>Get_Integration_Record</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <subflows>
        <name>RoundRobin_Service</name>
        <label>RoundRobin Service</label>
        <locationX>801</locationX>
        <locationY>1412</locationY>
        <connector>
            <targetReference>Create_a_new_LTB_Opp</targetReference>
        </connector>
        <flowName>RoundRobin_Handler</flowName>
        <inputAssignments>
            <name>Inputvar_Employee_Count</name>
            <value>
                <elementReference>Get_Integration_Record.Account__r.NumberOfEmployees</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Inputvar_Record_Type</name>
            <value>
                <stringValue>Account</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Inputvar_RecordID</name>
            <value>
                <elementReference>Get_Integration_Record.Account__r.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Inputvar_RR_Assignment_Group_Name</name>
            <value>
                <stringValue>MyCase Special Ops Sales Team</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Inputvar_Sales_Retain_Days</name>
            <value>
                <numberValue>180.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Inputvar_Sales_Retain_Period</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>var_New_Ownership_ID</assignToReference>
            <name>Ownership_ID_New_Assignment</name>
        </outputAssignments>
    </subflows>
    <textTemplates>
        <name>text_Error_LTB_Decision_Point</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;There was an error on the LTB &quot;Existing Opportunity&quot; Decision Point.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Integration Name: &lt;/strong&gt;{!Get_Integration_Record.Name}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Integration ID: &lt;/strong&gt;{!Get_Integration_Record.Integration_Id__c}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <name>text_Invalid_Owner_Email_Template</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;MyCase Sales,&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;A new MyCase LawToolBox Trial has been started and a new Opportunity has been auto-created.  During the creation of the opportunity, it was determined that the listed owner on the account is either the Integrations User or an inactive user account.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please review the account and opportunity and assign it to the correct owner.  &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Account:&lt;/strong&gt; {!Get_Integration_Record.Account__r.Name}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Opportunity: &lt;/strong&gt;{!var_New_Opportunity.Name}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Owner ID:&lt;/strong&gt; {!var_Owner}&lt;/p&gt;</text>
    </textTemplates>
    <textTemplates>
        <description>Send if there is more than one open LTB opportunity</description>
        <name>text_More_than_one_open_opp</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;There is more than one open LawToolBox opportunity associated with this account. Please review and contact the Business Systems team once you have decided which to remove or update. &lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Account name:&lt;/strong&gt; {!Get_Integration_Record.Account__r.Name}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Integration ID: &lt;/strong&gt;{!Get_Integration_Record.Integration_Id__c} {!Get_Integration_Record.Name}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>COUNT_Contacts</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>EndFlow</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Status passed from the Intergrations record</description>
        <name>sub_Integration_Status</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>current linked opportunity passed from the Intergration record</description>
        <name>sub_OpptyID_Current</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Original Opportunity ID before change</description>
        <name>sub_OpptyID_Prior</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>sub_Record_ID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_AccountID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_Close_Date</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_creating_opportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <description>link to the Integration record will populate to a corresponding field on the opp.</description>
        <name>var_Integration</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_New_Opportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>var_New_Ownership_ID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_Open_Opps</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>var_open_opps_COUNT</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>var_Opp_Stage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Used to store values from the Oppty Object that will be assigned later. Based on Integration record data</description>
        <name>var_Opp_Value_Assignments</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>var_Opportunity_Name</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_opportunity_update_type</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_Owner</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_RecordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <description>Contact that requested the information should populate to the Signer field in the opp.</description>
        <name>var_Signer</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>var_updating_opportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>var_valuePlusProduct</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
</Flow>
